# netlify.toml

[build]
  command = "npm run build"
  publish = "dist"

[build.environment]
  NODE_VERSION = "20"
  NODE_OPTIONS = "--max-old-space-size=6144"
  
# --- CORRECTED DEVELOPMENT SECTION ---
[dev]
  # Tell Netlify Dev where to find the source of the website files (your running Vite server)
  targetPort = 5173 
  # Set the port where Netlify Dev itself will run
  port = 8888 
# -------------------------------------

# --- 1. FUNCTION REDIRECTS (PROXY) ---

# --- Hugging Face Proxy ---
[[redirects]]
  from = "/api/hf"
  to = "/.netlify/functions/hf" # Fixed: Assumed your hf.js is the filename
  status = 200

# --- ADDED: Gemini Primary Proxy ---
[[redirects]]
  from = "/api/gemini-primary"
  to = "/.netlify/functions/gemini-primary"
  status = 200

# --- ADDED: Gemini Fallback Proxy ---
[[redirects]]
  from = "/api/gemini-fallback"
  to = "/.netlify/functions/gemini-fallback"
  status = 200

# --- 2. SPA REDIRECT (CATCH-ALL) ---
# This must be the LAST redirect
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200