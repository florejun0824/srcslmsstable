# netlify.toml

[build]
  command = "npm run build"
  publish = "dist"

[build.environment]
  NODE_VERSION = "20"
  NODE_OPTIONS = "--max-old-space-size=6144"

[dev]
  targetPort = 5173 
  port = 8888 

# --- NEW: Cache Control Headers ---
[[headers]]
  # 1. Do NOT cache the entry point or the service worker.
  # This ensures the browser always checks for a new version.
  for = "/*"
  [headers.values]
    Cache-Control = "public, max-age=0, must-revalidate"

[[headers]]
  # 2. Cache static assets (images, hashed JS/CSS) for a long time.
  # Vite adds hashes to filenames (e.g., index.a1b2.js), so these are safe to cache.
  for = "/assets/*"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"

[[headers]]
  for = "/*.png"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"

[[headers]]
  for = "/*.jpg"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"