/* src/index.css */
@import "react-datepicker/dist/react-datepicker.css";

/* 1. Tailwind Directives (Must be at the top) */
@tailwind base;
@tailwind components;
@tailwind utilities;

/* ==========================================================================
   Spinner Component Styles (iOS 18 Glass Background + Original Animation)
   ========================================================================== */
:root {
  --spinner-size: 80px;
  --spinner-thickness: 10px;
  --spinner-blur-intensity: 20px;
  --spinner-pulsate-duration: 2s;
  --spinner-rotation-duration: 4s;
  --spinner-gradient-start: #6366F1; /* Indigo-500 */
  --spinner-gradient-mid: #EC4899;   /* Pink-500 */
  --spinner-gradient-end: #8B5CF6;   /* Purple-500 */
  --spinner-overlay-bg: rgba(10, 10, 15, 0.7);
}

.spinner-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
  background-color: var(--spinner-overlay-bg);
  backdrop-filter: blur(16px) saturate(180%);
  -webkit-backdrop-filter: blur(16px) saturate(180%);
  z-index: 9999;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji";
}

.spinner-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 1.25rem;
  text-align: center;
  padding: 2.5rem 3rem;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 28px;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
  border: 1px solid rgba(255, 255, 255, 0.1);
}

.spinner-wrapper {
  position: relative;
  width: var(--spinner-size);
  height: var(--spinner-size);
  display: flex;
  justify-content: center;
  align-items: center;
}

.spinner-logo {
  position: absolute;
  width: calc(var(--spinner-size) / 1.3);
  height: calc(var(--spinner-size) / 1.3);
  border-radius: 12px;
  overflow: hidden;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
  background-color: transparent;
  z-index: 2;
}

.spinner-logo img {
  width: 100%;
  height: 100%;
  object-fit: contain;
}

.spinner-inner {
  width: 100%;
  height: 100%;
  border-radius: 50%;
  background: conic-gradient(
    var(--spinner-gradient-start) 0%,
    var(--spinner-gradient-mid) 30%,
    var(--spinner-gradient-end) 70%,
    var(--spinner-gradient-start) 100%
  );
  animation: spin-gradient var(--spinner-rotation-duration) linear infinite;
  filter: blur(var(--spinner-blur-intensity));
  opacity: 0.8;
}

.spinner-pulsar {
  position: absolute;
  width: 100%;
  height: 100%;
  border-radius: 50%;
  background: radial-gradient(circle at center, rgba(255,255,255,0.4) 0%, transparent 70%);
  animation: pulsate var(--spinner-pulsate-duration) ease-out infinite;
  z-index: 1;
}

.branding-text {
  color: rgb(255, 255, 255);
  font-weight: 700;
  font-size: 1.25rem;
  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
  letter-spacing: 0.08em;
  text-transform: uppercase;
}

.spinner-text-container {
  color: rgb(220, 220, 220);
  font-size: 1.1em;
  font-weight: 500;
  height: 1.5em;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
}

.typing-cursor {
  display: inline-block;
  width: 2px;
  height: 1em;
  background-color: rgb(220, 220, 220);
  opacity: 0.8;
  margin-left: 4px;
  animation: blink 1s step-end infinite;
  vertical-align: text-bottom;
}


/* ==========================================================================
   Custom Animations
   ========================================================================== */

@keyframes spin-gradient {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

@keyframes pulsate {
  0% { transform: scale(0.7); opacity: 0; }
  50% { transform: scale(1.1); opacity: 1; }
  100% { transform: scale(0.7); opacity: 0; }
}

@keyframes blink {
  50% { opacity: 0; }
}

@keyframes zoom-in-fade-out {
  0% { transform: scale(1); opacity: 1; }
  100% { transform: scale(1.2); opacity: 0; }
}
.animate-zoom-out { animation: zoom-in-fade-out 0.5s ease-in-out forwards; }

@keyframes fade-in {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}
.animate-fade-in { animation: fade-in 0.7s ease-out forwards; }

@keyframes slide-in-right {
    from { opacity: 0; transform: translateX(20px); }
    to { opacity: 1; transform: translateX(0); }
}
.animate-slide-in-right { animation: slide-in-right 0.6s ease-out forwards; }

/* ================================================================
   MODIFIED: Keyframes for Borders
   ================================================================ */

@keyframes spin-slow {
  /* MODIFIED: Added hue-rotate for "spectral ring" effect (Advanced) */
  from { transform: rotate(0deg); filter: hue-rotate(0deg); }
  to { transform: rotate(360deg); filter: hue-rotate(360deg); }
}

@keyframes spin-fast {
  0% { transform: rotate(0deg) scale(1); opacity: 0.9; }
  50% { transform: rotate(180deg) scale(1.05); opacity: 1; }
  100% { transform: rotate(360deg) scale(1); opacity: 0.9; }
}

@keyframes gradient-glow {
  /* MODIFIED: Added hue-rotate for "iridescence" (Elite) */
  0% { filter: brightness(1) drop-shadow(0 0 4px rgba(255, 255, 255, 0.3)) hue-rotate(-20deg); }
  50% { filter: brightness(1.3) drop-shadow(0 0 10px rgba(255, 255, 255, 0.7)) hue-rotate(20deg); }
  100% { filter: brightness(1) drop-shadow(0 0 4px rgba(255, 255, 255, 0.3)) hue-rotate(-20deg); }
}

@keyframes legendary-sparkle {
  /* This is the "particle sparkle" effect */
  0% { filter: brightness(1.1) saturate(1.1); }
  15% { filter: brightness(1.5) saturate(1.5) drop-shadow(0 0 8px #fff); } /* The "sparkle" */
  30% { filter: brightness(1.1) saturate(1.1); }
  100% { filter: brightness(1.1) saturate(1.1); }
}

/* --- NEW: Keyframe for Legendary "Light Orbit" --- */
@keyframes light-orbit {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

@keyframes gentle-pulse-glow {
  /* This is the "soft pulse shimmer" (now for Basic) */
  0% { opacity: 0.7; transform: scale(1); filter: hue-rotate(0deg) brightness(1.1); }
  50% { opacity: 1; transform: scale(1.05); filter: hue-rotate(45deg) brightness(1.3); }
  100% { opacity: 0.7; transform: scale(1); filter: hue-rotate(0deg) brightness(1.1); }
}

/* --- MODIFIED: Pan animation for Lvl 20 Background --- */
@keyframes gradient-pan {
  0%   { background-position: 0% 50%; }
  50%  { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

/* --- NEW: Lvl 60 "Elite" Sonar Pulse --- */
@keyframes pulsing-waves {
  from {
    transform: scale(0.5);
    opacity: 0.5;
  }
  to {
    transform: scale(1.5);
    opacity: 0;
  }
}

/* --- NEW: Lvl 90 "Legendary" Falling Stars --- */
@keyframes falling-stars {
  0% { background-position: 0% 0%; }
  100% { background-position: 0% 100%; }
}

/* ==========================================================================
   Custom Reusable Component Layer
   ========================================================================== */

@layer components {
  /* --- Unified Button System (iOS 18 Vibe) --- */
  .btn {
    @apply flex items-center justify-center gap-2 font-semibold rounded-full transition-all duration-300 active:scale-95 disabled:opacity-50 disabled:transform-none disabled:shadow-none disabled:cursor-not-allowed;
  }
  .btn-primary {
    @apply btn px-5 py-2.5 bg-gradient-to-r from-indigo-500 to-blue-500 text-white shadow-lg hover:shadow-xl hover:-translate-y-0.5;
  }
  .btn-secondary {
    @apply btn px-4 py-2 bg-black/5 backdrop-blur-sm text-slate-700 ring-1 ring-black/10 hover:bg-black/10;
  }
  .btn-destructive {
     @apply btn p-2.5 bg-red-500/10 backdrop-blur-sm text-red-600 ring-1 ring-red-500/20 hover:bg-red-500/20;
  }
  .btn-icon {
     @apply btn p-2.5 bg-black/5 backdrop-blur-sm text-slate-600 ring-1 ring-black/10 hover:bg-black/10;
  }
  .input-field {
    @apply w-full p-2 text-sm border border-slate-300 rounded-lg bg-white focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200;
  }

  /* --- DARK MODE for .btn --- */
  .dark .btn-secondary {
    @apply bg-white/5 text-slate-300 ring-1 ring-white/10 hover:bg-white/10;
  }
  .dark .btn-destructive {
    @apply bg-red-500/10 text-red-400 ring-1 ring-red-500/20 hover:bg-red-500/20;
  }
  .dark .btn-icon {
    @apply bg-white/5 text-slate-400 ring-1 ring-white/10 hover:bg-white/10;
  }
  .dark .input-field {
    @apply bg-slate-800 border-slate-700 text-slate-100 focus:ring-indigo-400 focus:border-indigo-400;
  }
}

/* ==========================================================================
   Third-Party Library Overrides (DatePicker, etc.)
   ========================================================================== */
.content-renderer svg {
  width: 100%;
  height: auto;
  max-width: 600px;
  display: block;
  margin-left: auto;
  margin-right: auto;
}

.tremor-dropdown-menu {
  z-index: 9999 !important;
}

.react-datepicker-popper {
  z-index: 9999 !important;
}

/* --- LIGHT MODE DatePicker --- */
.react-datepicker {
  background-color: #ffffff !important;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif !important;
  border-radius: 1rem !important; /* 16px */
  border: 1px solid #e5e7eb !important;
  box-shadow: 0 10px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1) !important;
}
.react-datepicker__header {
  background-color: #f9fafb !important; /* bg-gray-50 */
  border-bottom: 1px solid #e5e7eb !important;
}
.react-datepicker__current-month,
.react-datepicker__day-name {
  color: #111827 !important; /* text-gray-900 */
  font-weight: 600 !important;
}
.react-datepicker__day {
  color: #374151 !important; /* text-gray-700 */
}
.react-datepicker__day--selected,
.react-datepicker__day:hover {
  background-color: #4f46e5 !important; /* bg-indigo-600 */
  color: white !important;
  border-radius: 9999px !important;
}
.react-datepicker__day--keyboard-selected {
  background-color: transparent !important;
  border: 1px solid #4f46e5 !important;
}
.react-datepicker__navigation {
  top: 0.8rem !important;
}

.tremor-dialog-panel .react-datepicker {
 background-color: white !important;
}

/* --- DARK MODE DatePicker --- */
.dark .react-datepicker {
  background-color: #1e293b !important; /* slate-800 */
  border: 1px solid #334155 !important; /* slate-700 */
}
.dark .react-datepicker__header {
  background-color: #334155 !important; /* slate-700 */
  border-bottom: 1px solid #475569 !important; /* slate-600 */
}
.dark .react-datepicker__current-month,
.dark .react-datepicker__day-name {
  color: #f1f5f9 !important; /* slate-100 */
}
.dark .react-datepicker__day {
  color: #cbd5e1 !important; /* slate-300 */
}
.dark .react-datepicker__day--selected,
.dark .react-datepicker__day:hover {
  background-color: #60a5fa !important; /* blue-400 */
  color: #1e293b !important; /* slate-800 */
}
.dark .react-datepicker__day--keyboard-selected {
  border: 1px solid #60a5fa !important;
}
.dark .react-datepicker__day--disabled {
  color: #475569 !important; /* slate-600 */
}
.dark .tremor-dialog-panel .react-datepicker {
 background-color: #1e293b !important; /* slate-800 */
}


/* ==========================================================================
   Utility Layer Additions (Animations, Gradients)
   ========================================================================== */
@layer utilities {
    /* --- Border Animations & Gradients --- */
    .animate-spin-slow {
        /* This animation is modified in @keyframes to include hue-rotate */
        animation: spin-slow 4s linear infinite;
    }

    .animate-spin-fast {
        animation: spin-fast 2s linear infinite;
    }

    .animate-gradient-glow {
        /* This animation is modified in @keyframes to include hue-rotate */
        animation: gradient-glow 3s ease-in-out infinite;
    }
    .animate-legendary-sparkle {
        /* This is for the LEGENDARY border */
        animation: legendary-sparkle 2.5s ease-in-out infinite,
                   light-orbit 10s linear infinite;
    }
    
    /* --- MODIFIED: Renamed to match its new purpose --- */
    .animate-spin-and-sparkle {
        /* This is for the new ANIMATED border (AVATAR ONLY) */
        animation: spin-fast 2s linear infinite,
                   legendary-sparkle 2.5s ease-in-out infinite;
    }
    
    .animate-sparkle-only {
        /* This is for the new ANIMATED border (CARD/MODAL ONLY) */
        animation: legendary-sparkle 2.5s ease-in-out infinite;
    }
    
    .animate-gradient-pan {
        animation: gradient-pan 8s ease-in-out infinite; /* 8s duration */
        background-size: 200% 200%;
    }
    .animate-gentle-pulse {
        animation: gentle-pulse-glow 3s ease-in-out infinite;
    }
    /* --- END --- */

    .bg-gradient-gemini {
        background-image: conic-gradient(
            from 0deg,
            #4285F4, /* Google Blue */
            #7C4DFF, /* Deep Purple */
            #EC4899, /* Pink */
            #FBBC05, /* Google Yellow */
            #34A853, /* Google Green */
            #4285F4  /* Loop back to Blue */
        );
    }
    
    /* --- Level 10 Gradient Class (MODIFIED for new border-basic) --- */
    .bg-gradient-advanced {
        /* A purple/pink/blue gradient for panning */
        background-image: linear-gradient(135deg, #6a11cb 0%, #2575fc 50%, #EC4899 100%);
    }
    /* --- END --- */

    .bg-gradient-elite {
        /* Define your elite gradient */
        background-image: linear-gradient(135deg, #fccb90 0%, #d57eeb 100%);
    }
    .bg-gradient-legendary {
        /* Define your legendary gradient */
        background-image: radial-gradient(circle farthest-corner at 10% 20%, rgba(253, 203, 50, 1) 0%, rgba(244, 56, 98, 1) 100.2%);
    }
}

/* ================================================================
   PROFILE BACKGROUNDS â€” AURORA & COSMIC SERIES (ENHANCED)
   ================================================================ */

/* --- UNIVERSAL GLASS & DEPTH EFFECTS --- */
.profile-bg-pattern-1,
.profile-bg-pattern-2,
.profile-bg-elite,
.profile-bg-legendary {
  position: relative;
  overflow: hidden;
  backdrop-filter: blur(16px) saturate(160%);
  -webkit-backdrop-filter: blur(16px) saturate(160%);
  border-radius: 1.5rem;
}
.profile-bg-pattern-1::after,
.profile-bg-pattern-2::after,
.profile-bg-elite::after,
.profile-bg-legendary::after {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(145deg, rgba(255,255,255,0.06) 0%, rgba(255,255,255,0) 60%);
  mix-blend-mode: overlay;
  pointer-events: none;
  z-index: 1;
}

/* ================================================================
   AURORA VEIL (Light Mode)
   ================================================================ */
.profile-bg-pattern-1 {
  background: linear-gradient(120deg, #b3ecff 0%, #dcb9ff 50%, #ffb3d9 100%);
  background-size: 250% 250%;
  animation: auroraFlowLight 12s ease-in-out infinite alternate;
}
@keyframes auroraFlowLight {
  0% { background-position: 0% 50%; filter: hue-rotate(0deg) brightness(1); }
  50% { background-position: 100% 50%; filter: hue-rotate(30deg) brightness(1.15); }
  100% { background-position: 0% 50%; filter: hue-rotate(0deg) brightness(1); }
}

/* ================================================================
   AURORA VEIL (Enhanced Dark Mode)
   ================================================================ */
.dark .profile-bg-pattern-1 {
  background:
    radial-gradient(ellipse at 20% 30%, rgba(77, 255, 255, 0.15) 0%, transparent 50%),
    radial-gradient(ellipse at 80% 60%, rgba(255, 77, 255, 0.12) 0%, transparent 50%),
    linear-gradient(120deg, #101926 0%, #152d3d 40%, #1b263b 100%);
  background-size: 200% 200%;
  animation: auroraFlowDark 10s ease-in-out infinite alternate;
  filter: brightness(1.2);
}
.dark .profile-bg-pattern-1::before {
  content: '';
  position: absolute;
  inset: -20%;
  background: conic-gradient(
    from 90deg,
    rgba(0, 255, 255, 0.2),
    rgba(255, 0, 255, 0.15),
    rgba(0, 255, 200, 0.25),
    rgba(255, 0, 255, 0.1)
  );
  animation: auroraRibbon 15s ease-in-out infinite alternate;
  filter: blur(50px);
  z-index: 0;
}
@keyframes auroraFlowDark {
  0% { background-position: 0% 50%; filter: hue-rotate(0deg) brightness(1); }
  50% { background-position: 100% 50%; filter: hue-rotate(50deg) brightness(1.4); }
  100% { background-position: 0% 50%; filter: hue-rotate(0deg) brightness(1); }
}
@keyframes auroraRibbon {
  0% { transform: rotate(0deg) scale(1); opacity: 0.8; }
  50% { transform: rotate(10deg) scale(1.2); opacity: 1; }
  100% { transform: rotate(-10deg) scale(1); opacity: 0.8; }
}

/* ================================================================
   NEBULA FIELD
   ================================================================ */
.profile-bg-pattern-2 {
  background: radial-gradient(circle at 10% 10%, rgba(255,255,255,0.2) 0%, transparent 40%),
              linear-gradient(135deg, #89f7fe 0%, #66a6ff 100%);
  background-size: 300% 300%;
  animation: nebulaDriftLight 15s linear infinite;
}
@keyframes nebulaDriftLight {
  0% { background-position: 0% 0%; }
  50% { background-position: 100% 100%; }
  100% { background-position: 0% 0%; }
}
.dark .profile-bg-pattern-2 {
  background: radial-gradient(circle at 60% 50%, rgba(255,255,255,0.06) 0%, transparent 50%),
              linear-gradient(135deg, #1a2a6c 0%, #b21f1f 50%, #fdbb2d 100%);
  background-size: 400% 400%;
  animation: nebulaDriftDark 20s ease-in-out infinite;
  filter: brightness(1.1);
}
@keyframes nebulaDriftDark {
  0% { background-position: 0% 0%; filter: hue-rotate(0deg); }
  50% { background-position: 100% 100%; filter: hue-rotate(60deg); }
  100% { background-position: 0% 0%; filter: hue-rotate(0deg); }
}

/* ================================================================
   CELESTIAL RIPPLE (Elite)
   ================================================================ */
.profile-bg-elite {
  background: linear-gradient(135deg, #fddb92 0%, #d1fdff 100%);
}
.profile-bg-elite::before {
  content: '';
  position: absolute;
  top: 50%; left: 50%;
  width: 180%;
  height: 180%;
  border-radius: 50%;
  background: radial-gradient(circle, rgba(255,255,255,0.2) 0%, transparent 70%);
  transform: translate(-50%, -50%) scale(0.3);
  animation: rippleWave 5s ease-out infinite;
  z-index: 0;
}
@keyframes rippleWave {
  0% { transform: translate(-50%, -50%) scale(0.3); opacity: 0.6; }
  70% { transform: translate(-50%, -50%) scale(1.1); opacity: 0.1; }
  100% { transform: translate(-50%, -50%) scale(0.3); opacity: 0; }
}
.dark .profile-bg-elite {
  background: linear-gradient(135deg, #232526 0%, #414345 100%);
}

/* ================================================================
   GALACTIC PRISM (Legendary)
   ================================================================ */
.profile-bg-legendary {
  background: linear-gradient(120deg, #ff9a9e 0%, #fad0c4 40%, #fbc2eb 100%);
  background-size: 300% 300%;
  animation: prismShiftLight 10s linear infinite;
}
.profile-bg-legendary::before {
  content: '';
  position: absolute;
  inset: 0;
  background-image: radial-gradient(white 1px, transparent 1px);
  background-size: 2px 2px;
  opacity: 0.15;
  animation: starScroll 40s linear infinite;
  z-index: 0;
}
@keyframes prismShiftLight {
  0% { background-position: 0% 50%; filter: hue-rotate(0deg); }
  50% { background-position: 100% 50%; filter: hue-rotate(60deg); }
  100% { background-position: 0% 50%; filter: hue-rotate(0deg); }
}
@keyframes starScroll {
  0% { transform: translateY(0); }
  100% { transform: translateY(100%); }
}
.dark .profile-bg-legendary {
  background: linear-gradient(135deg, #0f0c29 0%, #302b63 50%, #24243e 100%);
  animation: prismShiftDark 15s linear infinite;
  filter: brightness(1.2);
}
@keyframes prismShiftDark {
  0% { background-position: 0% 50%; filter: hue-rotate(0deg) brightness(1); }
  50% { background-position: 100% 50%; filter: hue-rotate(100deg) brightness(1.4); }
  100% { background-position: 0% 50%; filter: hue-rotate(0deg) brightness(1); }
}


/* ==========================================================================
   Quiz Modal Theming (MODIFIED)
   ========================================================================== */

/* --- MODIFIED: Shared base styles for pseudo-element borders --- */
.quiz-container,
.theme-border-basic,
.theme-border-animated,
.theme-border-advanced,
.theme-border-elite,
.theme-border-legendary {
    position: relative; /* Needed for pseudo-elements */
}

/* --- MODIFIED: Base style for the pseudo-element border --- */
/* This now applies to .quiz-container AND all .theme-border-* classes */
.quiz-container::before,
.theme-border-basic::before,
.theme-border-animated::before,
.theme-border-advanced::before,
.theme-border-elite::before,
.theme-border-legendary::before {
    content: '';
    position: absolute;
    inset: -2px; /* Control border distance from edge */
    border-radius: inherit; /* Match the modal's border radius */
    padding: 4px; /* Controls the thickness + spacing */
    z-index: 0; /* Behind the main content */
    pointer-events: none;
    -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
    -webkit-mask-composite: xor;
            mask-composite: exclude;
    transition: all 0.3s ease-in-out;
    background-color: transparent; /* Default */
}

/* Specific theme styles applied to the pseudo-element */
.theme-border-basic::before {
    /* --- SWAPPED --- */
    /* Now the "Majestic Pan" + Pulse */
    @apply bg-gradient-advanced animate-gradient-pan animate-gentle-pulse;
    background-size: 200% 200%; /* Required for gradient-pan */
}
.theme-border-animated::before {
    /* --- SWAPPED & FIXED --- */
    /* Now the "Marching Ants" + particle sparkles for cards/modals */
    @apply bg-gradient-gemini animate-gradient-pan animate-sparkle-only;
    background-size: 200% 200%; /* Required for gradient-pan */
}
.theme-border-advanced::before {
    /* ðŸ’š Advanced: Rotating spectral ring */
    /* This inherits the modified 'spin-slow' keyframe (with hue-rotate) */
    @apply border-t-transparent border-solid border-green-500 animate-spin-slow border-4;
    background-color: transparent !important; /* Override background if using border */
    inset: -4px; /* Adjust inset if using border */
    padding: 0; /* Remove padding if using border */
}
.theme-border-elite::before {
    /* ðŸ’Ž Elite: Prismatic crystal shimmer */
    /* This inherits the modified 'gradient-glow' keyframe (with hue-rotate) */
    @apply bg-gradient-elite animate-gradient-glow;
}
.theme-border-legendary::before {
    /* ðŸŒŒ Legendary: Celestial halo with particle sparkles */
    /* This inherits the modified 'animate-legendary-sparkle' utility (with light-orbit) */
    @apply bg-gradient-legendary animate-legendary-sparkle;
}

/* ==========================================================================
   Lesson Content Styling (Unchanged)
   ========================================================================== */
/* ... (Existing .content-renderer styles, Masonry, etc.) ... */
@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translate(-50%, 20px);
  }
  to {
    opacity: 1;
    transform: translate(-50%, 0);
  }
}
@keyframes holoText {
  0% { background-position: 0% 50%; }
  100% { background-position: 200% 50%; }
}

@keyframes flicker {
  0% { opacity: 1; }
  45% { opacity: 0.9; }
  50% { opacity: 0.4; }
  55% { opacity: 0.9; }
  100% { opacity: 1; }
}
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}
/* ================================
   Lesson Content Styling (iOS-like)
   ================================ */

.content-renderer {
  line-height: 1.75;
  font-family: 'Inter', system-ui, sans-serif;
  color: #1f2937; /* slate-800 */
}

/* Headings */
.content-renderer h1,
.content-renderer h2,
.content-renderer h3,
.content-renderer h4 {
  font-weight: 700;
  color: #111827; /* slate-900 */
  margin-top: 1.5rem;
  margin-bottom: 0.75rem;
}

/* Paragraphs */
.content-renderer p {
  margin-bottom: 1rem;
}

/* Lists */
.content-renderer ul {
  list-style-type: disc;
  padding-left: 1.5rem;
  margin-bottom: 1rem;
}
.content-renderer ol {
  list-style-type: decimal;
  padding-left: 1.5rem;
  margin-bottom: 1rem;
}

/* ================================
   Inline Highlights
   ================================ */
.content-renderer .highlight-term {
  background: rgba(37, 99, 235, 0.08); /* subtle blue bg */
  padding: 0.1rem 0.25rem;
  border-radius: 0.25rem;
  color: #1e3a8a; /* indigo-900 */
  font-weight: 600;
}

.content-renderer .soft-text {
  color: #6b7280; /* slate-500 */
  font-weight: 300;
}

.content-renderer .strong-text {
  color: #111827;
  font-weight: 800;
}

/* ================================
   Callout Boxes
   ================================ */

.content-renderer .callout-info {
  border-left: 4px solid #2563eb; /* blue-600 */
  padding: 1rem;
  margin: 1.25rem 0;
  border-radius: 0.75rem;
  background: #eff6ff; /* blue-50 */
  color: #1e40af; /* blue-900 */
  box-shadow: 0 1px 3px rgba(0,0,0,0.05);
}

.content-renderer .callout-warning {
  border-left: 4px solid #facc15; /* yellow-400 */
  padding: 1rem;
  margin: 1.25rem 0;
  border-radius: 0.75rem;
  background: #fefce8; /* yellow-50 */
  color: #78350f; /* amber-900 */
  box-shadow: 0 1px 3px rgba(0,0,0,0.05);
}

.content-renderer .callout-success {
  border-left: 4px solid #22c55e; /* green-500 */
  padding: 1rem;
  margin: 1.25rem 0;
  border-radius: 0.75rem;
  background: #ecfdf5; /* green-50 */
  color: #065f46; /* green-900 */
  box-shadow: 0 1px 3px rgba(0,0,0,0.05);
}

/* ================================
   Links & Tables
   ================================ */
.content-renderer a {
  color: #2563eb;
  font-weight: 500;
  text-decoration: underline;
}
.content-renderer a:hover {
  color: #1d4ed8;
}

.content-renderer table {
  width: 100%;
  border-collapse: collapse;
  margin: 1.5rem 0;
  font-size: 0.95rem;
}
.content-renderer th,
.content-renderer td {
  border: 1px solid #e5e7eb;
  padding: 0.75rem;
  text-align: left;
}
.content-renderer th {
  background: #f9fafb;
  font-weight: 600;
}

/* --- DARK MODE for .content-renderer --- */
.dark .content-renderer {
  color: #cbd5e1; /* slate-300 */
}
.dark .content-renderer h1,
.dark .content-renderer h2,
.dark .content-renderer h3,
.dark .content-renderer h4 {
  color: #f1f5f9; /* slate-100 */
}
.dark .content-renderer .highlight-term {
  background: rgba(96, 165, 250, 0.1); /* blue-400 at 10% */
  color: #93c5fd; /* blue-300 */
}
.dark .content-renderer .soft-text {
  color: #94a3b8; /* slate-400 */
}
.dark .content-renderer .strong-text {
  color: #ffffff;
}
.dark .content-renderer .callout-info {
  border-left-color: #3b82f6; /* blue-500 */
  background: #1e293b; /* slate-800 */
  color: #bfdbfe; /* blue-300 */
}
.dark .content-renderer .callout-warning {
  border-left-color: #facc15; /* yellow-400 */
  background: #3f3318; /* dark yellow bg */
  color: #fde68a; /* yellow-200 */
}
.dark .content-renderer .callout-success {
  border-left-color: #22c55e; /* green-500 */
  background: #113123; /* dark green bg */
  color: #86efac; /* green-300 */
}
.dark .content-renderer a {
  color: #60a5fa; /* blue-400 */
}
.dark .content-renderer a:hover {
  color: #93c5fd; /* blue-300 */
}
.dark .content-renderer table {
  border-color: #334155; /* slate-700 */
}
.dark .content-renderer th,
.dark .content-renderer td {
  border-color: #334155; /* slate-700 */
}
.dark .content-renderer th {
  background: #334155; /* slate-700 */
}

/* ================================== */

/* In your main CSS file, e.g., index.css */
.my-masonry-grid {
  display: -webkit-box; /* Not needed if autoprefixing */
  display: -ms-flexbox; /* Not needed if autoprefixing */
  display: flex;
  margin-left: -24px; /* gutter size offset */
  width: auto;
}
.my-masonry-grid_column {
  padding-left: 24px; /* gutter size */
  background-clip: padding-box;
}

/* Style your items */
.my-masonry-grid_column > div { /* change div to reference your elements you put in <Masonry> */
  margin-bottom: 24px;
}
@keyframes xpPulse {
  0% { background-color: #3b82f6; }   /* blue-500 */
  50% { background-color: #facc15; }  /* yellow-400 */
  100% { background-color: #3b82f6; } /* back to blue */
}

.xp-pulse {
  animation: xpPulse 1.2s ease-in-out;
}