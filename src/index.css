/* src/index.css */
@import "react-datepicker/dist/react-datepicker.css";
@import "react-quill/dist/quill.snow.css";

/* 1. Tailwind Directives */
@tailwind base;
@tailwind components;
@tailwind utilities;

/* ==========================================================================
   Spinner Component Styles (macOS 16 / VisionOS Glass Aesthetics)
   ========================================================================== */
:root {
  --spinner-size: 80px;
  --spinner-thickness: 10px;
  /* OPTIMIZED: Reduced from 32px to 12px for GPU performance */
  --spinner-blur-intensity: 12px; 
  --spinner-pulsate-duration: 3s; 
  --spinner-rotation-duration: 4s;
  --spinner-gradient-start: #6366F1; /* Indigo-500 */
  --spinner-gradient-mid: #EC4899;   /* Pink-500 */
  --spinner-gradient-end: #8B5CF6;   /* Purple-500 */
  --spinner-overlay-bg: rgba(5, 5, 10, 0.65); /* Darker to compensate for less blur */
}

.spinner-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
  background-color: var(--spinner-overlay-bg);
  /* OPTIMIZED: Reduced blur radius */
  backdrop-filter: blur(var(--spinner-blur-intensity)) saturate(180%); 
  -webkit-backdrop-filter: blur(var(--spinner-blur-intensity)) saturate(180%);
  
  /* OPTIMIZED: Force GPU Layer */
  transform: translateZ(0);
  will-change: opacity, backdrop-filter;
  
  z-index: 9999;
  font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", "Segoe UI", Roboto, sans-serif;
  transition: opacity 0.3s ease, backdrop-filter 0.3s ease;
}

.spinner-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 1.5rem;
  text-align: center;
  padding: 3rem 3.5rem;
  
  /* macOS 16 Ceramic Glass Effect */
  background: rgba(255, 255, 255, 0.7);
  border-radius: 32px; 
  
  /* Optical Border */
  box-shadow: 
    inset 0 0 0 1px rgba(255, 255, 255, 0.5),
    0 20px 50px -12px rgba(0, 0, 0, 0.3),
    0 0 0 1px rgba(255, 255, 255, 0.2);
    
  border: 1px solid rgba(255, 255, 255, 0.2);
  /* OPTIMIZED: Reduced blur */
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);
}

/* Dark Mode support for Spinner */
@media (prefers-color-scheme: dark) {
  .spinner-container {
    background: rgba(30, 32, 40, 0.6);
    box-shadow: 
      inset 0 0 0 1px rgba(255, 255, 255, 0.1),
      0 25px 60px -12px rgba(0, 0, 0, 0.6);
    border: 1px solid rgba(255, 255, 255, 0.05);
  }
}

.spinner-wrapper {
  position: relative;
  width: var(--spinner-size);
  height: var(--spinner-size);
  display: flex;
  justify-content: center;
  align-items: center;
}

.spinner-logo {
  position: absolute;
  width: calc(var(--spinner-size) / 1.3);
  height: calc(var(--spinner-size) / 1.3);
  border-radius: 16px; 
  overflow: hidden;
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
  background-color: transparent;
  z-index: 2;
}

.spinner-logo img {
  width: 100%;
  height: 100%;
  object-fit: contain;
}

.spinner-inner {
  width: 100%;
  height: 100%;
  border-radius: 50%;
  background: conic-gradient(
    var(--spinner-gradient-start) 0%,
    var(--spinner-gradient-mid) 30%,
    var(--spinner-gradient-end) 70%,
    var(--spinner-gradient-start) 100%
  );
  animation: spin-gradient var(--spinner-rotation-duration) linear infinite;
  filter: blur(var(--spinner-blur-intensity));
  opacity: 0.9;
}

.spinner-pulsar {
  position: absolute;
  width: 100%;
  height: 100%;
  border-radius: 50%;
  background: radial-gradient(circle at center, rgba(255,255,255,0.5) 0%, transparent 70%);
  animation: pulsate var(--spinner-pulsate-duration) ease-out infinite;
  z-index: 1;
}

.branding-text {
  color: rgb(30, 41, 59); 
  font-weight: 700;
  font-size: 1.25rem;
  letter-spacing: 0.05em;
  text-transform: uppercase;
}
@media (prefers-color-scheme: dark) {
  .branding-text { color: white; }
}

.spinner-text-container {
  color: rgb(71, 85, 105); 
  font-size: 1.1em;
  font-weight: 500;
  height: 1.5em;
}
@media (prefers-color-scheme: dark) {
  .spinner-text-container { color: rgb(203, 213, 225); }
}

.typing-cursor {
  display: inline-block;
  width: 2px;
  height: 1em;
  background-color: currentColor;
  opacity: 0.8;
  margin-left: 4px;
  animation: blink 1s step-end infinite;
  vertical-align: text-bottom;
}


/* ==========================================================================
   Custom Animations
   ========================================================================== */

@keyframes spin-gradient {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

@keyframes pulsate {
  0% { transform: scale(0.8); opacity: 0; }
  50% { transform: scale(1.05); opacity: 0.6; }
  100% { transform: scale(0.8); opacity: 0; }
}

@keyframes blink {
  50% { opacity: 0; }
}

@keyframes zoom-in-fade-out {
  0% { transform: scale(1); opacity: 1; }
  100% { transform: scale(1.15); opacity: 0; }
}
.animate-zoom-out { animation: zoom-in-fade-out 0.5s ease-in-out forwards; }

@keyframes fade-in {
    from { opacity: 0; transform: translateY(15px); }
    to { opacity: 1; transform: translateY(0); }
}
.animate-fade-in { animation: fade-in 0.8s cubic-bezier(0.16, 1, 0.3, 1) forwards; }

@keyframes slide-in-right {
    from { opacity: 0; transform: translateX(25px); }
    to { opacity: 1; transform: translateX(0); }
}
.animate-slide-in-right { animation: slide-in-right 0.7s cubic-bezier(0.16, 1, 0.3, 1) forwards; }

/* ================================================================
   Border Animations
   ================================================================ */

@keyframes spin-slow {
  from { transform: rotate(0deg); filter: hue-rotate(0deg); }
  to { transform: rotate(360deg); filter: hue-rotate(360deg); }
}

@keyframes spin-fast {
  0% { transform: rotate(0deg) scale(1); opacity: 0.8; }
  50% { transform: rotate(180deg) scale(1.02); opacity: 1; }
  100% { transform: rotate(360deg) scale(1); opacity: 0.8; }
}

@keyframes gradient-glow {
  0% { filter: brightness(1) drop-shadow(0 0 2px rgba(255, 255, 255, 0.2)) hue-rotate(-20deg); }
  50% { filter: brightness(1.2) drop-shadow(0 0 8px rgba(255, 255, 255, 0.5)) hue-rotate(20deg); }
  100% { filter: brightness(1) drop-shadow(0 0 2px rgba(255, 255, 255, 0.2)) hue-rotate(-20deg); }
}

@keyframes legendary-sparkle {
  0% { filter: brightness(1.1) saturate(1.1); }
  15% { filter: brightness(1.4) saturate(1.4) drop-shadow(0 0 6px #fff); }
  30% { filter: brightness(1.1) saturate(1.1); }
  100% { filter: brightness(1.1) saturate(1.1); }
}

@keyframes light-orbit {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

@keyframes gentle-pulse-glow {
  0% { opacity: 0.6; transform: scale(1); filter: hue-rotate(0deg) brightness(1.1); }
  50% { opacity: 0.9; transform: scale(1.01); filter: hue-rotate(45deg) brightness(1.2); }
  100% { opacity: 0.6; transform: scale(1); filter: hue-rotate(0deg) brightness(1.1); }
}

@keyframes gradient-pan {
  0%   { background-position: 0% 50%; }
  50%  { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}


/* ==========================================================================
   Component Layer
   ========================================================================== */

@layer components {
  .btn {
    @apply flex items-center justify-center gap-2 font-medium rounded-full transition-all duration-300 active:scale-95 disabled:opacity-50 disabled:transform-none disabled:shadow-none disabled:cursor-not-allowed;
    -webkit-font-smoothing: antialiased;
  }

  .btn-primary {
    @apply btn px-5 py-2.5 text-white shadow-lg hover:shadow-xl hover:-translate-y-0.5;
    background-image: linear-gradient(135deg, #6366F1 0%, #3B82F6 100%);
    box-shadow: 
      inset 0 1px 0 rgba(255, 255, 255, 0.3), 
      0 4px 12px rgba(66, 133, 244, 0.3),     
      0 0 0 1px rgba(255,255,255,0.1);        
  }
  .btn-primary:hover {
    background-image: linear-gradient(135deg, #5558E3 0%, #2563EB 100%);
    box-shadow: 
      inset 0 1px 0 rgba(255, 255, 255, 0.4), 
      0 8px 20px rgba(66, 133, 244, 0.4),
      0 0 0 1px rgba(255,255,255,0.2);
  }

  .btn-secondary {
    @apply btn px-4 py-2 text-slate-700 backdrop-blur-md;
    background: rgba(255, 255, 255, 0.5);
    border: 1px solid rgba(0, 0, 0, 0.05);
    box-shadow: 0 2px 5px rgba(0,0,0,0.03);
  }
  .btn-secondary:hover {
    background: rgba(255, 255, 255, 0.7);
    border-color: rgba(0, 0, 0, 0.1);
  }

  .btn-destructive {
     @apply btn p-2.5 text-red-600 backdrop-blur-sm;
     background: rgba(239, 68, 68, 0.1);
     border: 1px solid rgba(239, 68, 68, 0.2);
  }
  .btn-destructive:hover {
     background: rgba(239, 68, 68, 0.15);
     box-shadow: 0 4px 12px rgba(239, 68, 68, 0.15);
  }

  .btn-icon {
     @apply btn p-2.5 text-slate-600 backdrop-blur-sm;
     background: rgba(255, 255, 255, 0.4);
     border: 1px solid rgba(0, 0, 0, 0.05);
  }
  .btn-icon:hover {
     background: rgba(255, 255, 255, 0.6);
  }

  .input-field {
    @apply w-full p-2.5 text-sm rounded-xl transition-all duration-200;
    background: rgba(255, 255, 255, 0.5);
    border: 1px solid rgba(0, 0, 0, 0.08);
    backdrop-filter: blur(8px);
    box-shadow: inset 0 1px 2px rgba(0,0,0,0.03);
    color: #1e293b;
  }
  .input-field:focus {
    background: rgba(255, 255, 255, 0.8);
    border-color: #6366F1;
    box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.15);
    outline: none;
  }

    .dark .btn-secondary {
      background: rgba(255, 255, 255, 0.1);
      @apply text-slate-300; 
      border: 1px solid rgba(255, 255, 255, 0.1);
    }
    .dark .btn-secondary:hover {
      background: rgba(255, 255, 255, 0.15);
    }

    .dark .btn-destructive {
      background: rgba(239, 68, 68, 0.15);
      @apply text-red-400; 
      border-color: rgba(239, 68, 68, 0.3);
    }

    .dark .btn-icon {
      background: rgba(255, 255, 255, 0.05);
      @apply text-slate-400; 
      border: 1px solid rgba(255, 255, 255, 0.08);
    }
  
    .dark .input-field {
      background: rgba(0, 0, 0, 0.3);
      border: 1px solid rgba(255, 255, 255, 0.1);
      color: #f1f5f9;
      box-shadow: inset 0 1px 2px rgba(0,0,0,0.3);
    }
    .dark .input-field:focus {
      background: rgba(0, 0, 0, 0.5);
      border-color: #818cf8;
    }
}

/* ==========================================================================
   Third-Party Library Overrides
   ========================================================================== */
.content-renderer svg {
  width: 100%;
  height: auto;
  max-width: 600px;
  display: block;
  margin-left: auto;
  margin-right: auto;
}

.tremor-dropdown-menu { z-index: 9999 !important; }
.react-datepicker-popper { z-index: 9999 !important; }

/* --- LIGHT MODE DatePicker (Frosted) --- */
.react-datepicker {
  background-color: rgba(255, 255, 255, 0.75) !important; 
  /* OPTIMIZED: Reduced blur */
  backdrop-filter: blur(12px) saturate(180%) !important; 
  -webkit-backdrop-filter: blur(12px) saturate(180%) !important;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif !important;
  border-radius: 1.25rem !important; 
  border: 1px solid rgba(255, 255, 255, 0.5) !important;
  box-shadow: 
    0 10px 40px -10px rgba(0, 0, 0, 0.15),
    inset 0 0 0 1px rgba(255, 255, 255, 0.5) !important;
}

.react-datepicker__header {
  background-color: rgba(249, 250, 251, 0.5) !important; 
  border-bottom: 1px solid rgba(0, 0, 0, 0.05) !important;
}

.react-datepicker__current-month,
.react-datepicker__day-name {
  color: #111827 !important;
  font-weight: 600 !important;
}

.react-datepicker__day {
  color: #374151 !important;
  border-radius: 8px !important; 
}

.react-datepicker__day--selected,
.react-datepicker__day:hover {
  background: linear-gradient(135deg, #6366F1 0%, #4f46e5 100%) !important;
  color: white !important;
  box-shadow: 0 4px 12px rgba(79, 70, 229, 0.3) !important;
}

.react-datepicker__day--keyboard-selected {
  background-color: rgba(99, 102, 241, 0.1) !important;
  border: 1px solid #4f46e5 !important;
}

.react-datepicker__navigation { top: 1rem !important; }

.tremor-dialog-panel .react-datepicker {
 background-color: rgba(255, 255, 255, 0.9) !important;
}

/* --- DARK MODE DatePicker (Frosted) --- */
.dark .react-datepicker {
  background-color: rgba(30, 41, 59, 0.75) !important; 
  border: 1px solid rgba(255, 255, 255, 0.1) !important;
  box-shadow: 
    0 10px 40px -10px rgba(0, 0, 0, 0.5),
    inset 0 0 0 1px rgba(255, 255, 255, 0.05) !important;
}
.dark .react-datepicker__header {
  background-color: rgba(51, 65, 85, 0.4) !important;
  border-bottom: 1px solid rgba(255, 255, 255, 0.05) !important;
}
.dark .react-datepicker__current-month,
.dark .react-datepicker__day-name {
  color: #f1f5f9 !important;
}
.dark .react-datepicker__day {
  color: #cbd5e1 !important;
}
.dark .react-datepicker__day--selected,
.dark .react-datepicker__day:hover {
  background: linear-gradient(135deg, #60a5fa 0%, #3b82f6 100%) !important;
  color: #ffffff !important;
}
.dark .react-datepicker__day--keyboard-selected {
  border: 1px solid #60a5fa !important;
}
.dark .react-datepicker__day--disabled {
  color: #475569 !important;
}
.dark .tremor-dialog-panel .react-datepicker {
 background-color: rgba(30, 41, 59, 0.9) !important;
}


/* ==========================================================================
   Utility Layer Additions
   ========================================================================== */
@layer utilities {
    .animate-spin-slow { animation: spin-slow 4s linear infinite; }
    .animate-spin-fast { animation: spin-fast 2s linear infinite; }
    .animate-gradient-glow { animation: gradient-glow 3s ease-in-out infinite; }
    
    .animate-legendary-sparkle {
        animation: legendary-sparkle 2.5s ease-in-out infinite,
                   light-orbit 10s linear infinite;
    }
    
    .animate-spin-and-sparkle {
        animation: spin-fast 2s linear infinite,
                   legendary-sparkle 2.5s ease-in-out infinite;
    }
    
    .animate-sparkle-only {
        animation: legendary-sparkle 2.5s ease-in-out infinite;
    }
    
    .animate-gradient-pan {
        animation: gradient-pan 8s ease-in-out infinite;
        background-size: 200% 200%;
    }
    .animate-gentle-pulse {
        animation: gentle-pulse-glow 3s ease-in-out infinite;
    }

    .bg-gradient-gemini {
        background-image: conic-gradient(
            from 0deg, #4285F4, #7C4DFF, #EC4899, #FBBC05, #34A853, #4285F4
        );
    }
    
    .bg-gradient-advanced {
        background-image: linear-gradient(135deg, #6a11cb 0%, #2575fc 50%, #EC4899 100%);
    }

    .bg-gradient-elite {
        background-image: linear-gradient(135deg, #fccb90 0%, #d57eeb 100%);
    }
    .bg-gradient-legendary {
        background-image: radial-gradient(circle farthest-corner at 10% 20%, rgba(253, 203, 50, 1) 0%, rgba(244, 56, 98, 1) 100.2%);
    }
}

/* ================================================================
   PROFILE BACKGROUNDS â€” AURORA & COSMIC SERIES
   ================================================================ */
.profile-bg-pattern-1,
.profile-bg-pattern-2,
.profile-bg-elite,
.profile-bg-legendary {
  position: relative;
  overflow: hidden;
  /* OPTIMIZED: Reduced blur from 24px to 12px */
  backdrop-filter: blur(12px) saturate(140%); 
  -webkit-backdrop-filter: blur(12px) saturate(140%);
  border-radius: 1.5rem;
  will-change: transform; /* Hint to browser */
}
.profile-bg-pattern-1::after,
.profile-bg-pattern-2::after,
.profile-bg-elite::after,
.profile-bg-legendary::after {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(145deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0) 60%);
  mix-blend-mode: overlay;
  pointer-events: none;
  z-index: 0;
}

/* AURORA VEIL (Light) */
.profile-bg-pattern-1 {
  background: linear-gradient(120deg, #b3ecff 0%, #dcb9ff 50%, #ffb3d9 100%);
  background-size: 250% 250%;
  animation: auroraFlowLight 12s ease-in-out infinite alternate;
}
@keyframes auroraFlowLight {
  0% { background-position: 0% 50%; filter: hue-rotate(0deg) brightness(1); }
  50% { background-position: 100% 50%; filter: hue-rotate(30deg) brightness(1.15); }
  100% { background-position: 0% 50%; filter: hue-rotate(0deg) brightness(1); }
}

/* AURORA VEIL (Dark) */
.dark .profile-bg-pattern-1 {
  background:
    radial-gradient(ellipse at 20% 30%, rgba(77, 255, 255, 0.15) 0%, transparent 50%),
    radial-gradient(ellipse at 80% 60%, rgba(255, 77, 255, 0.12) 0%, transparent 50%),
    linear-gradient(120deg, #101926 0%, #152d3d 40%, #1b263b 100%);
  background-size: 200% 200%;
  animation: auroraFlowDark 10s ease-in-out infinite alternate;
  filter: brightness(1.2);
}
.dark .profile-bg-pattern-1::before {
  content: '';
  position: absolute;
  inset: -20%;
  background: conic-gradient(from 90deg, rgba(0, 255, 255, 0.2), rgba(255, 0, 255, 0.15), rgba(0, 255, 200, 0.25), rgba(255, 0, 255, 0.1));
  animation: auroraRibbon 15s ease-in-out infinite alternate;
  filter: blur(50px);
  z-index: 0;
}
@keyframes auroraFlowDark {
  0% { background-position: 0% 50%; filter: hue-rotate(0deg) brightness(1); }
  50% { background-position: 100% 50%; filter: hue-rotate(50deg) brightness(1.4); }
  100% { background-position: 0% 50%; filter: hue-rotate(0deg) brightness(1); }
}
@keyframes auroraRibbon {
  0% { transform: rotate(0deg) scale(1); opacity: 0.8; }
  50% { transform: rotate(10deg) scale(1.2); opacity: 1; }
  100% { transform: rotate(-10deg) scale(1); opacity: 0.8; }
}

/* NEBULA FIELD */
.profile-bg-pattern-2 {
  background: radial-gradient(circle at 10% 10%, rgba(255,255,255,0.2) 0%, transparent 40%),
              linear-gradient(135deg, #89f7fe 0%, #66a6ff 100%);
  background-size: 300% 300%;
  animation: nebulaDriftLight 15s linear infinite;
}
@keyframes nebulaDriftLight {
  0% { background-position: 0% 0%; }
  50% { background-position: 100% 100%; }
  100% { background-position: 0% 0%; }
}
.dark .profile-bg-pattern-2 {
  background: radial-gradient(circle at 60% 50%, rgba(255,255,255,0.06) 0%, transparent 50%),
              linear-gradient(135deg, #1a2a6c 0%, #b21f1f 50%, #fdbb2d 100%);
  background-size: 400% 400%;
  animation: nebulaDriftDark 20s ease-in-out infinite;
  filter: brightness(1.1);
}
@keyframes nebulaDriftDark {
  0% { background-position: 0% 0%; filter: hue-rotate(0deg); }
  50% { background-position: 100% 100%; filter: hue-rotate(60deg); }
  100% { background-position: 0% 0%; filter: hue-rotate(0deg); }
}

/* CELESTIAL RIPPLE */
.profile-bg-elite {
  background: linear-gradient(135deg, #fddb92 0%, #d1fdff 100%);
}
.profile-bg-elite::before {
  content: '';
  position: absolute;
  top: 50%; left: 50%;
  width: 180%;
  height: 180%;
  border-radius: 50%;
  background: radial-gradient(circle, rgba(255,255,255,0.2) 0%, transparent 70%);
  transform: translate(-50%, -50%) scale(0.3);
  animation: rippleWave 5s ease-out infinite;
  z-index: 0;
}
@keyframes rippleWave {
  0% { transform: translate(-50%, -50%) scale(0.3); opacity: 0.6; }
  70% { transform: translate(-50%, -50%) scale(1.1); opacity: 0.1; }
  100% { transform: translate(-50%, -50%) scale(0.3); opacity: 0; }
}
.dark .profile-bg-elite {
  background: linear-gradient(135deg, #232526 0%, #414345 100%);
}

/* GALACTIC PRISM */
.profile-bg-legendary {
  background: linear-gradient(120deg, #ff9a9e 0%, #fad0c4 40%, #fbc2eb 100%);
  background-size: 300% 300%;
  animation: prismShiftLight 10s linear infinite;
}
.profile-bg-legendary::before {
  content: '';
  position: absolute;
  inset: 0;
  background-image: radial-gradient(white 1px, transparent 1px);
  background-size: 2px 2px;
  opacity: 0.15;
  animation: starScroll 40s linear infinite;
  z-index: 0;
}
@keyframes prismShiftLight {
  0% { background-position: 0% 50%; filter: hue-rotate(0deg); }
  50% { background-position: 100% 50%; filter: hue-rotate(60deg); }
  100% { background-position: 0% 50%; filter: hue-rotate(0deg); }
}
@keyframes starScroll {
  0% { transform: translateY(0); }
  100% { transform: translateY(100%); }
}
.dark .profile-bg-legendary {
  background: linear-gradient(135deg, #0f0c29 0%, #302b63 50%, #24243e 100%);
  animation: prismShiftDark 15s linear infinite;
  filter: brightness(1.2);
}
@keyframes prismShiftDark {
  0% { background-position: 0% 50%; filter: hue-rotate(0deg) brightness(1); }
  50% { background-position: 100% 50%; filter: hue-rotate(100deg) brightness(1.4); }
  100% { background-position: 0% 50%; filter: hue-rotate(0deg) brightness(1); }
}


/* ==========================================================================
   Quiz Modal Theming (macOS 16 Border Glows)
   ========================================================================== */
.quiz-container,
.theme-border-basic,
.theme-border-animated,
.theme-border-advanced,
.theme-border-elite,
.theme-border-legendary {
    position: relative;
}

.quiz-container::before,
.theme-border-basic::before,
.theme-border-animated::before,
.theme-border-advanced::before,
.theme-border-elite::before,
.theme-border-legendary::before {
    content: '';
    position: absolute;
    inset: -2px;
    border-radius: inherit;
    padding: 2px; 
    z-index: 0;
    pointer-events: none;
    -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
    -webkit-mask-composite: xor;
            mask-composite: exclude;
    transition: all 0.3s ease-in-out;
    background-color: transparent;
    filter: blur(0.5px); 
}

.theme-border-basic::before {
    @apply bg-gradient-advanced animate-gradient-pan animate-gentle-pulse;
    background-size: 200% 200%;
}
.theme-border-animated::before {
    @apply bg-gradient-gemini animate-gradient-pan animate-sparkle-only;
    background-size: 400% 400%;
}
.theme-border-advanced::before {
    @apply border-t-transparent border-solid border-green-500 animate-spin-slow border-2; 
    background-color: transparent !important;
    inset: -2px;
    padding: 0;
}
.theme-border-elite::before {
    @apply bg-gradient-elite animate-gradient-glow;
}
.theme-border-legendary::before {
    @apply bg-gradient-legendary animate-legendary-sparkle;
}

/* ==========================================================================
   Lesson Content Styling (Clean Typography for Glass)
   ========================================================================== */
.content-renderer {
  line-height: 1.75;
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
  color: #1f2937;
}

.content-renderer h1, .content-renderer h2, .content-renderer h3, .content-renderer h4 {
  font-weight: 700;
  color: #111827;
  margin-top: 1.5rem;
  margin-bottom: 0.75rem;
  letter-spacing: -0.02em; 
}

.content-renderer p { margin-bottom: 1rem; }
.content-renderer ul { list-style-type: disc; padding-left: 1.5rem; margin-bottom: 1rem; }
.content-renderer ol { list-style-type: decimal; padding-left: 1.5rem; margin-bottom: 1rem; }

.content-renderer .highlight-term {
  background: rgba(37, 99, 235, 0.1);
  padding: 0.1rem 0.3rem;
  border-radius: 0.3rem;
  color: #1e3a8a;
  font-weight: 600;
}
.content-renderer .soft-text { color: #6b7280; font-weight: 300; }
.content-renderer .strong-text { color: #111827; font-weight: 800; }

/* Glassy Callout Boxes */
.content-renderer .callout-info {
  border-left: 4px solid #2563eb;
  padding: 1rem;
  margin: 1.25rem 0;
  border-radius: 0.75rem;
  background: rgba(239, 246, 255, 0.6); 
  backdrop-filter: blur(4px);
  color: #1e40af;
}
.content-renderer .callout-warning {
  border-left: 4px solid #facc15;
  padding: 1rem;
  margin: 1.25rem 0;
  border-radius: 0.75rem;
  background: rgba(254, 252, 232, 0.6); 
  backdrop-filter: blur(4px);
  color: #78350f;
}
.content-renderer .callout-success {
  border-left: 4px solid #22c55e;
  padding: 1rem;
  margin: 1.25rem 0;
  border-radius: 0.75rem;
  background: rgba(236, 253, 245, 0.6); 
  backdrop-filter: blur(4px);
  color: #065f46;
}

.content-renderer a { color: #2563eb; font-weight: 500; text-decoration: underline; }
.content-renderer a:hover { color: #1d4ed8; }

.content-renderer table {
  width: 100%;
  border-collapse: separate;
  border-spacing: 0;
  margin: 1.5rem 0;
  font-size: 0.95rem;
  border-radius: 8px;
  overflow: hidden;
  border: 1px solid rgba(0,0,0,0.1);
}
.content-renderer th, .content-renderer td {
  border-bottom: 1px solid rgba(0,0,0,0.05);
  padding: 0.75rem;
  text-align: left;
}
.content-renderer th { background: rgba(249, 250, 251, 0.8); font-weight: 600; }

/* Dark Mode Content */
.dark .content-renderer { color: #cbd5e1; }
.dark .content-renderer h1, .dark .content-renderer h2, .dark .content-renderer h3, .dark .content-renderer h4 { color: #f1f5f9; }
.dark .content-renderer .highlight-term { background: rgba(96, 165, 250, 0.15); color: #93c5fd; }
.dark .content-renderer .soft-text { color: #94a3b8; }
.dark .content-renderer .strong-text { color: #ffffff; }
.dark .content-renderer .callout-info { background: rgba(30, 41, 59, 0.6); color: #bfdbfe; border-left-color: #3b82f6; }
.dark .content-renderer .callout-warning { background: rgba(63, 51, 24, 0.6); color: #fde68a; border-left-color: #facc15; }
.dark .content-renderer .callout-success { background: rgba(17, 49, 35, 0.6); color: #86efac; border-left-color: #22c55e; }
.dark .content-renderer a { color: #60a5fa; }
.dark .content-renderer table { border-color: rgba(255,255,255,0.1); }
.dark .content-renderer th, .dark .content-renderer td { border-color: rgba(255,255,255,0.05); }
.dark .content-renderer th { background: rgba(51, 65, 85, 0.6); }

/* ================================== */
.my-masonry-grid {
  display: flex;
  margin-left: -24px;
  width: auto;
}
.my-masonry-grid_column {
  padding-left: 24px;
  background-clip: padding-box;
}
.my-masonry-grid_column > div { margin-bottom: 24px; }

@keyframes xpPulse {
  0% { background-color: #3b82f6; }
  50% { background-color: #facc15; }
  100% { background-color: #3b82f6; }
}
.xp-pulse { 
    animation: xpPulse 1.2s ease-in-out;
    will-change: background-color; 
}

/* ==========================================================================
   ReactQuill Dark Mode Theme Override
   ========================================================================== */
.dark .ql-snow { border-color: #334155 !important; }
.dark .ql-toolbar {
  background: #1e293b;
  border-bottom-color: #334155 !important;
  border-top-left-radius: 0.75rem;
  border-top-right-radius: 0.75rem;
}
.dark .ql-container {
  background: #0f172a;
  border-bottom-left-radius: 0.75rem;
  border-bottom-right-radius: 0.75rem;
}
.dark .ql-editor { color: #cbd5e1; }
.dark .ql-editor.ql-blank::before { color: #64748b !important; }
.dark .ql-stroke { stroke: #94a3b8 !important; }
.dark .ql-picker-label { color: #94a3b8 !important; }

/* ==========================================================================
   Custom Bio Display Styles (OPTIMIZED)
   ========================================================================== */
.bio-content-display {
  max-height: 150px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: normal;
  display: block;
}
.bio-content-display p {
  display: block;
  margin-bottom: 0.25rem;
  line-height: 1.25;
}
.bio-content-display img {
  max-width: 100%;
  max-height: 65px;
  border-radius: 4px;
  margin: 4px 0;
  display: inline-block; 
  object-fit: contain;
}

.bio-content-enter {
  opacity: 0;
  transform: scale(0.98);
}
.bio-content-enter-active {
  opacity: 1;
  transform: scale(1);
  transition: opacity 300ms ease-out, transform 300ms cubic-bezier(0.2, 0.8, 0.2, 1);
  will-change: opacity, transform;
}
.bio-content-exit {
  opacity: 1;
  transform: scale(1);
}
.bio-content-exit-active {
  opacity: 0;
  transform: scale(0.98);
  transition: opacity 200ms ease-in, transform 200ms cubic-bezier(0.2, 0.8, 0.2, 1);
  will-change: opacity, transform;
}

.math-img {
    display: inline-block;
    background: #ffffff;
    filter: none !important;
    mix-blend-mode: normal !important;
    image-rendering: auto;
}


/* ==========================================================================
   Global Scrollbar Improvements
   ========================================================================== */
* {
    /* Enables hardware acceleration for scrolling on iOS */
    -webkit-overflow-scrolling: touch; 
}